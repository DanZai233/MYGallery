# MYGallery - ä¸ªäººç…§ç‰‡å¢™ç³»ç»Ÿ

<div align="center">
  <h1>ğŸ“· MYGallery</h1>
  <p>ä¸€ä¸ªç®€çº¦ã€ç¾è§‚ã€åŠŸèƒ½å®Œæ•´çš„ä¸ªäººç…§ç‰‡å¢™ç³»ç»Ÿ</p>
  <p>
    <img src="https://img.shields.io/badge/Version-1.1.4-blue" alt="Version">
    <img src="https://img.shields.io/badge/Go-1.24+-00ADD8?style=flat&logo=go" alt="Go Version">
    <img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License">
  </p>
</div>

---

## ğŸ“¸ ç•Œé¢é¢„è§ˆ

### æš—è‰²æ¨¡å¼ Â· ç€‘å¸ƒæµç”»å»Š
> é»˜è®¤æš—è‰²ä¸»é¢˜ï¼Œ5åˆ—ç´§å‡‘ç€‘å¸ƒæµï¼Œä¾§æ ç®€ç¬”ç”»å›¾æ ‡å¯¼èˆª

![æš—è‰²æ¨¡å¼ç”»å»Š](docs/screenshots/gallery-dark.webp)

### äº®è‰²æ¨¡å¼
> ä¸€é”®åˆ‡æ¢ç™½å¤©/é»‘å¤œä¸»é¢˜

![äº®è‰²æ¨¡å¼ç”»å»Š](docs/screenshots/gallery-light.webp)

### ç¯ç®±æŸ¥çœ‹å™¨ Â· ä¿¡æ¯é¢æ¿
> ChronoFrame é£æ ¼å…¨å±æŸ¥çœ‹å™¨ï¼Œå³ä¾§ä¿¡æ¯é¢æ¿å±•ç¤º EXIF å…ƒæ•°æ®ã€åˆ†ç±»æ ‡ç­¾ï¼Œåº•éƒ¨ç¼©ç•¥å›¾æ¡å¯å¿«é€Ÿè·³è½¬

![ç¯ç®±æŸ¥çœ‹å™¨](docs/screenshots/lightbox-info.webp)

### è¡¨æ€ç³»ç»Ÿ
> è®¿å®¢å¯å¯¹ç…§ç‰‡è¿›è¡Œ emoji è¡¨æ€ï¼ˆğŸ‘â¤ï¸ğŸ˜ğŸ˜‚ğŸ˜®ğŸ˜¢ğŸ”¥âœ¨ï¼‰ï¼Œæ— éœ€ç™»å½•ï¼ŒåŸºäºæŒ‡çº¹è¯†åˆ«

![è¡¨æ€ç³»ç»Ÿ](docs/screenshots/reactions.webp)

### ç…§ç‰‡åœ°å›¾
> åŸºäº Leaflet çš„å…¨å±åœ°å›¾ï¼Œå±•ç¤ºå¸¦ GPS åæ ‡çš„ç…§ç‰‡ä½ç½®ï¼Œæ”¯æŒèšåˆæ ‡è®°

![ç…§ç‰‡åœ°å›¾](docs/screenshots/map.webp)

### åå°ç®¡ç†
> ChronoFrame é£æ ¼ä¾§æ å¯¼èˆªï¼Œä»ªè¡¨ç›˜ç»Ÿè®¡ï¼Œæ‹–æ‹½ä¸Šä¼ ï¼Œç…§ç‰‡ç®¡ç†

![åå°ç®¡ç†](docs/screenshots/admin.webp)

---

## âœ¨ ç‰¹æ€§

### ğŸ¨ ç²¾ç¾çš„å‰ç«¯å±•ç¤º
- **ç€‘å¸ƒæµå¸ƒå±€** â€” 5/4/3/2åˆ—è‡ªé€‚åº”ï¼Œ4px ç´§å‡‘é—´è·
- **æš—è‰²æ¨¡å¼é»˜è®¤** â€” ChronoFrame é£æ ¼ä¸­æ€§é…è‰²
- **ä¾§æ å›¾æ ‡å¯¼èˆª** â€” SVG ç®€ç¬”ç”»å›¾æ ‡ï¼Œæç®€è®¾è®¡
- **ç¯ç®±æŸ¥çœ‹å™¨** â€” å…¨å±æŸ¥çœ‹ + å³ä¾§ä¿¡æ¯é¢æ¿ + åº•éƒ¨ç¼©ç•¥å›¾å¯¼èˆª
- **è¡¨æ€ç³»ç»Ÿ** â€” 8 ç§ emoji è¡¨æ€ï¼ŒæŒ‡çº¹è¯†åˆ«åŒ¿åç”¨æˆ·
- **åˆ†äº«é“¾æ¥** â€” ä¸€é”®å¤åˆ¶ç…§ç‰‡ç›´é“¾ï¼ˆ`?photo=ID`ï¼‰ï¼Œæ”¯æŒ Deep Link
- **åˆ†ç±»ç­›é€‰** â€” æŒ‰åˆ†ç±»å¿«é€Ÿç­›é€‰ï¼Œæ¨ªå‘æ»‘åŠ¨æ”¯æŒ
- **æœç´¢åŠŸèƒ½** â€” æœç´¢æ ‡é¢˜ã€æè¿°ã€æ ‡ç­¾ã€ä½ç½®
- **é»‘å¤œæ¨¡å¼** â€” ä¸€é”®åˆ‡æ¢ï¼Œè®°å¿†ç”¨æˆ·åå¥½

### ğŸ“± ç§»åŠ¨ç«¯å‹å¥½
- **å“åº”å¼å¯¼èˆª** â€” ç§»åŠ¨ç«¯åº•éƒ¨æ å¸ƒå±€
- **è§¦æ‘¸å‹å¥½** â€” å¡ç‰‡è§¦æ‘¸äº¤äº’ï¼Œç¯ç®±è§¦æ‘¸æ»‘åŠ¨
- **åº•éƒ¨ä¿¡æ¯å¼¹çª—** â€” ç§»åŠ¨ç«¯ä¿¡æ¯é¢æ¿è‡ªé€‚åº”ä¸ºåº•éƒ¨å¼¹å‡º
- **æ¨ªå‘åˆ†ç±»æ»šåŠ¨** â€” åˆ†ç±»è¿‡å¤šæ—¶è‡ªåŠ¨æ¨ªå‘æ»šåŠ¨

### âš™ï¸ å¼ºå¤§çš„åå°ç®¡ç†
- **ä¾§æ å¯¼èˆª** â€” ä»ªè¡¨ç›˜ã€åˆ†ç±»ç®¡ç†ã€ç½‘ç«™è®¾ç½®ã€åœ°å›¾ã€å‰å°
- **æ‹–æ‹½ä¸Šä¼ ** â€” æ‰¹é‡ä¸Šä¼ ï¼Œå®æ—¶è¿›åº¦
- **EXIF è‡ªåŠ¨æå–** â€” ç›¸æœº/æ‰‹æœºç…§ç‰‡å…ƒæ•°æ®å…¼å®¹
- **Live Photo ä¸Šä¼ ** â€” åŒæ—¶ä¸Šä¼ ç…§ç‰‡å’Œé…å¥—è§†é¢‘
- **åˆ†ç±»ç®¡ç†** â€” åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤åˆ†ç±»

### ğŸ“ ç…§ç‰‡åœ°å›¾
- **Leaflet åœ°å›¾** â€” OpenStreetMap ç“¦ç‰‡ï¼Œæ— éœ€ API Key
- **ç…§ç‰‡æ ‡è®°** â€” ç¼©ç•¥å›¾æ ‡è®° + å¼¹å‡ºè¯¦æƒ…å¡
- **èšåˆæ ‡è®°** â€” å¯†é›†åŒºåŸŸè‡ªåŠ¨èšåˆ
- **ç¼©æ”¾æ§åˆ¶** â€” æ”¾å¤§/ç¼©å°/é‡ç½®

### ğŸ”§ çµæ´»é…ç½®
- **å¤šæ•°æ®åº“** â€” SQLiteï¼ˆé»˜è®¤ï¼‰ã€MySQLã€PostgreSQL
- **å¤šå­˜å‚¨** â€” æœ¬åœ°ã€AWS S3ã€MinIOã€é˜¿é‡Œäº‘ OSS
- **äº‘ç«¯ç¼©ç•¥å›¾** â€” æ‰€æœ‰å­˜å‚¨åç«¯æ”¯æŒç¼©ç•¥å›¾è‡ªåŠ¨ä¸Šä¼ 

### ğŸ“¸ EXIF å…ƒæ•°æ®
- å…¼å®¹ç›¸æœºï¼ˆSony/Canon/Nikonï¼‰å’Œæ‰‹æœºï¼ˆiPhone/Androidï¼‰
- æå–å­—æ®µï¼šå“ç‰Œã€å‹å·ã€é•œå¤´ã€ç„¦è·ã€å…‰åœˆã€å¿«é—¨ã€ISOã€GPSã€ç™½å¹³è¡¡ã€é—ªå…‰ç¯ã€æ›å…‰æ¨¡å¼ã€æµ‹å…‰æ¨¡å¼ç­‰
- EXIF æ–¹å‘è‡ªåŠ¨æ—‹è½¬ç¼©ç•¥å›¾

### ğŸ¬ Live Photo
- ä¸Šä¼ é…å¥— `.mov` è§†é¢‘
- å‰ç«¯ LIVE å¾½ç« æ ‡è¯†

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Go 1.24+**ï¼ˆéœ€ CGOï¼ŒSQLite é©±åŠ¨ä¾èµ–ï¼‰
- **GCC**ï¼ˆC ç¼–è¯‘å™¨ï¼‰

### æœ¬åœ°è¿è¡Œ

```bash
git clone https://github.com/danzai233/mygallery.git
cd mygallery
go mod download
cp config.example.yaml config.yaml
make init
go run main.go
```

è®¿é—®ï¼š
- ğŸ“· **å‰å°**ï¼šhttp://localhost:8080
- âš™ï¸ **åå°**ï¼šhttp://localhost:8080/admin
- ğŸ—ºï¸ **åœ°å›¾**ï¼šhttp://localhost:8080/map.html
- ğŸ‘¤ **é»˜è®¤è´¦å·**ï¼š`admin` / `admin123`

### Docker éƒ¨ç½²

```bash
cp config.example.yaml config.yaml
docker compose build && docker compose up -d
```

### Makefile

```bash
make help    # æ‰€æœ‰å¯ç”¨å‘½ä»¤
make run     # è¿è¡Œ
make build   # ç¼–è¯‘
make test    # æµ‹è¯•
make dev     # çƒ­é‡è½½å¼€å‘æ¨¡å¼
```

---

## ğŸ”§ é…ç½®è¯¦è§£

### æ•°æ®åº“

```yaml
database:
  type: "sqlite"  # sqlite / mysql / postgres
  sqlite:
    path: "./data/mygallery.db"
```

### å­˜å‚¨

```yaml
storage:
  type: "local"  # local / s3 / minio / aliyun
  local:
    upload_dir: "./uploads"
    thumbnail_dir: "./uploads/thumbnails"
    url_prefix: "/uploads"
```

<details>
<summary>S3 / MinIO / é˜¿é‡Œäº‘ OSS é…ç½®</summary>

```yaml
# AWS S3
storage:
  type: "s3"
  s3:
    region: "us-east-1"
    bucket: "mygallery"
    access_key: "YOUR_KEY"
    secret_key: "YOUR_SECRET"
    url_prefix: "https://bucket.s3.amazonaws.com"

# MinIO
storage:
  type: "minio"
  minio:
    endpoint: "localhost:9000"
    bucket: "mygallery"
    access_key: "minioadmin"
    secret_key: "minioadmin"
    use_ssl: false
    url_prefix: "http://localhost:9000/mygallery"

# é˜¿é‡Œäº‘ OSS
storage:
  type: "aliyun"
  aliyun:
    endpoint: "oss-cn-hangzhou.aliyuncs.com"
    bucket: "mygallery"
    access_key: "YOUR_KEY"
    secret_key: "YOUR_SECRET"
    url_prefix: "https://mygallery.oss-cn-hangzhou.aliyuncs.com"
```

</details>

---

## ğŸŒ API æ¥å£

### å…¬å¼€æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/photos` | ç…§ç‰‡åˆ—è¡¨ï¼ˆ`page`, `size`, `category`, `search`ï¼‰ |
| GET | `/api/photos/:id` | ç…§ç‰‡è¯¦æƒ… |
| GET | `/api/categories` | åˆ†ç±»åˆ—è¡¨ |
| GET | `/api/settings` | ç½‘ç«™è®¾ç½® |
| GET | `/api/photos/:id/reactions` | è·å–è¡¨æ€ç»Ÿè®¡ |
| POST | `/api/photos/:id/reactions` | æ·»åŠ /æ›´æ–°è¡¨æ€ |
| DELETE | `/api/photos/:id/reactions` | åˆ é™¤è¡¨æ€ |
| GET | `/health` | å¥åº·æ£€æŸ¥ |

### éœ€è®¤è¯æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/auth/login` | ç™»å½• |
| POST | `/api/photos` | ä¸Šä¼ ç…§ç‰‡ï¼ˆæ”¯æŒ Live Photoï¼‰ |
| PUT | `/api/photos/:id` | æ›´æ–°ç…§ç‰‡ä¿¡æ¯ |
| DELETE | `/api/photos/:id` | åˆ é™¤ç…§ç‰‡ |
| POST | `/api/categories` | åˆ›å»ºåˆ†ç±» |
| PUT | `/api/categories/:id` | æ›´æ–°åˆ†ç±» |
| DELETE | `/api/categories/:id` | åˆ é™¤åˆ†ç±» |

---

## ğŸš€ éƒ¨ç½²æ–¹å¼

<details>
<summary>äºŒè¿›åˆ¶ç›´æ¥è¿è¡Œ</summary>

```bash
go build -o mygallery main.go
cp config.example.yaml config.yaml
mkdir -p data uploads uploads/thumbnails
./mygallery
```
</details>

<details>
<summary>Nginx åå‘ä»£ç†</summary>

```nginx
server {
    listen 80;
    server_name gallery.example.com;
    client_max_body_size 50M;
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```
</details>

<details>
<summary>Systemd æœåŠ¡</summary>

```ini
[Unit]
Description=MYGallery
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/opt/mygallery
ExecStart=/opt/mygallery/mygallery
Restart=on-failure

[Install]
WantedBy=multi-user.target
```
</details>

---

## ğŸ”’ å®‰å…¨å»ºè®®

1. ä¿®æ”¹é»˜è®¤å¯†ç 
2. ä¿®æ”¹ `config.yaml` ä¸­çš„ JWT å¯†é’¥
3. ç”Ÿäº§ç¯å¢ƒå¯ç”¨ HTTPS
4. é…ç½®é˜²ç«å¢™
5. å®šæœŸå¤‡ä»½ `data/` å’Œ `uploads/`

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| åç«¯ | Go + Gin + GORM |
| è®¤è¯ | JWT |
| EXIF | rwcarlsen/goexif |
| å›¾ç‰‡å¤„ç† | disintegration/imaging |
| æ•°æ®åº“ | SQLite / MySQL / PostgreSQL |
| å­˜å‚¨ | Local / S3 / MinIO / é˜¿é‡Œäº‘ OSS |
| å‰ç«¯ | Vanilla JS + Tailwind CSS |
| åœ°å›¾ | Leaflet + OpenStreetMap |

## ğŸ“„ è®¸å¯è¯

MIT License

---

<div align="center">
  <p>Made with â¤ï¸ by MYGallery</p>
</div>
