# MYGallery - ä¸ªäººç…§ç‰‡å¢™ç³»ç»Ÿ

<div align="center">
  <h1>ğŸ“· MYGallery</h1>
  <p>ä¸€ä¸ªç®€çº¦ã€ç¾è§‚ã€åŠŸèƒ½å®Œæ•´çš„ä¸ªäººç…§ç‰‡å¢™ç³»ç»Ÿ</p>
  <p>
    <img src="https://img.shields.io/badge/Version-1.1.4-blue" alt="Version">
    <img src="https://img.shields.io/badge/Go-1.24+-00ADD8?style=flat&logo=go" alt="Go Version">
    <img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License">
  </p>
</div>

---

## ğŸ“¸ ç•Œé¢é¢„è§ˆ

### æš—è‰²æ¨¡å¼ Â· ç€‘å¸ƒæµç”»å»Š

é»˜è®¤æš—è‰²ä¸»é¢˜ï¼Œ5 åˆ—ç´§å‡‘ç€‘å¸ƒæµå¸ƒå±€ï¼Œä¾§æ  SVG ç®€ç¬”ç”»å›¾æ ‡å¯¼èˆªã€‚

![æš—è‰²æ¨¡å¼ç”»å»Š](docs/screenshots/gallery-dark.webp)

### äº®è‰²æ¨¡å¼

ä¸€é”®åˆ‡æ¢äº®è‰²/æš—è‰²ä¸»é¢˜ï¼Œåå¥½è‡ªåŠ¨è®°å¿†ã€‚

![äº®è‰²æ¨¡å¼ç”»å»Š](docs/screenshots/gallery-light.webp)

### ç¯ç®±æŸ¥çœ‹å™¨ Â· EXIF ä¿¡æ¯é¢æ¿

ChronoFrame é£æ ¼å…¨å±æŸ¥çœ‹å™¨ï¼Œå³ä¾§ä¿¡æ¯é¢æ¿åˆ†åŒºå±•ç¤º EXIF å…ƒæ•°æ®ï¼Œåº•éƒ¨ç¼©ç•¥å›¾æ¡å¯å¿«é€Ÿè·³è½¬ã€‚

![ç¯ç®±æŸ¥çœ‹å™¨](docs/screenshots/lightbox-info.webp)

### ç¯ç®± Â· GPS è¿·ä½ åœ°å›¾

å½“ç…§ç‰‡åŒ…å« GPS åæ ‡æ—¶ï¼Œä¿¡æ¯é¢æ¿é¡¶éƒ¨åµŒå…¥ Leaflet è¿·ä½ åœ°å›¾ï¼Œå®æ—¶æ˜¾ç¤ºæ‹æ‘„ä½ç½®ã€‚

![GPS è¿·ä½ åœ°å›¾](docs/screenshots/lightbox-minimap.webp)

### ç¯ç®± Â· å…¨å±æ¨¡å¼

ç‚¹å‡» â„¹ æŒ‰é’®å…³é—­ä¿¡æ¯é¢æ¿åï¼Œç…§ç‰‡è‡ªåŠ¨é“ºæ»¡å…¨å±å±…ä¸­å±•ç¤ºã€‚

![å…¨å±æ¨¡å¼](docs/screenshots/lightbox-fullwidth.webp)

### è¡¨æ€ç³»ç»Ÿ

è®¿å®¢å¯å¯¹ç…§ç‰‡è¿›è¡Œ emoji è¡¨æ€ï¼ˆğŸ‘â¤ï¸ğŸ˜ğŸ˜‚ğŸ˜®ğŸ˜¢ğŸ”¥âœ¨ï¼‰ï¼Œæ— éœ€ç™»å½•ï¼ŒåŸºäºæŒ‡çº¹è¯†åˆ«ã€‚

| è¡¨æ€é€‰æ‹©å™¨ | è¡¨æ€å·²æ·»åŠ  |
|:---:|:---:|
| ![è¡¨æ€é€‰æ‹©å™¨](docs/screenshots/reactions.webp) | ![è¡¨æ€å·²æ·»åŠ ](docs/screenshots/reaction-added.webp) |

### ç…§ç‰‡åœ°å›¾

åŸºäº Leaflet + OpenStreetMap çš„å…¨å±åœ°å›¾ï¼Œå±•ç¤ºå¸¦ GPS åæ ‡çš„ç…§ç‰‡ä½ç½®ï¼Œæ”¯æŒèšåˆæ ‡è®°ã€‚

| åœ°å›¾æ ‡è®° | æ ‡è®°å¼¹çª— |
|:---:|:---:|
| ![åœ°å›¾æ ‡è®°](docs/screenshots/map-markers.webp) | ![æ ‡è®°å¼¹çª—](docs/screenshots/map-popup.webp) |

### åå°ç®¡ç†

ChronoFrame é£æ ¼ä¾§æ å¯¼èˆªï¼Œä»ªè¡¨ç›˜ç»Ÿè®¡ï¼Œæ‹–æ‹½ä¸Šä¼ ï¼Œç…§ç‰‡/åˆ†ç±»ç®¡ç†ã€‚

![åå°ç®¡ç†](docs/screenshots/admin.webp)

---

## âœ¨ ç‰¹æ€§

### ğŸ¨ å‰ç«¯å±•ç¤º
- **ç€‘å¸ƒæµå¸ƒå±€** â€” 5/4/3/2 åˆ—è‡ªé€‚åº”ï¼Œ4px ç´§å‡‘é—´è·
- **æš—è‰²æ¨¡å¼é»˜è®¤** â€” ChronoFrame é£æ ¼ä¸­æ€§é…è‰²
- **ä¾§æ å›¾æ ‡å¯¼èˆª** â€” SVG ç®€ç¬”ç”»å›¾æ ‡ï¼Œæç®€è®¾è®¡
- **ç¯ç®±æŸ¥çœ‹å™¨** â€” å…¨å±æŸ¥çœ‹ + å³ä¾§ä¿¡æ¯é¢æ¿ + åº•éƒ¨ç¼©ç•¥å›¾å¯¼èˆª
- **GPS è¿·ä½ åœ°å›¾** â€” ä¿¡æ¯é¢æ¿åµŒå…¥ Leaflet åœ°å›¾æ˜¾ç¤ºæ‹æ‘„ä½ç½®
- **è¡¨æ€ç³»ç»Ÿ** â€” 8 ç§ emoji è¡¨æ€ï¼ŒæŒ‡çº¹è¯†åˆ«åŒ¿åç”¨æˆ·
- **åˆ†äº«é“¾æ¥** â€” ä¸€é”®å¤åˆ¶ç…§ç‰‡ç›´é“¾ï¼ˆ`?photo=ID`ï¼‰ï¼Œæ”¯æŒ Deep Link
- **åˆ†ç±»ç­›é€‰** â€” æŒ‰åˆ†ç±»å¿«é€Ÿç­›é€‰ï¼Œæ¨ªå‘æ»‘åŠ¨æ”¯æŒ
- **æœç´¢åŠŸèƒ½** â€” æœç´¢æ ‡é¢˜ã€æè¿°ã€æ ‡ç­¾ã€ä½ç½®
- **äº®æš—åˆ‡æ¢** â€” ä¸€é”®åˆ‡æ¢ï¼Œè®°å¿†ç”¨æˆ·åå¥½

### ğŸ“± ç§»åŠ¨ç«¯å‹å¥½
- ç§»åŠ¨ç«¯åº•éƒ¨æ å¯¼èˆª
- å¡ç‰‡è§¦æ‘¸äº¤äº’ï¼Œç¯ç®±è§¦æ‘¸æ»‘åŠ¨
- ç§»åŠ¨ç«¯ä¿¡æ¯é¢æ¿è‡ªé€‚åº”ä¸ºåº•éƒ¨å¼¹å‡º
- åˆ†ç±»æ¨ªå‘æ»šåŠ¨

### âš™ï¸ åå°ç®¡ç†
- ä¾§æ å¯¼èˆªï¼šä»ªè¡¨ç›˜ã€åˆ†ç±»ç®¡ç†ã€ç½‘ç«™è®¾ç½®ã€åœ°å›¾ã€å‰å°
- æ‹–æ‹½ä¸Šä¼ ï¼Œæ‰¹é‡ä¸Šä¼ ï¼Œå®æ—¶è¿›åº¦
- EXIF è‡ªåŠ¨æå– + æ‰‹åŠ¨ç¼–è¾‘
- Live Photo ä¸Šä¼ ï¼ˆç…§ç‰‡ + é…å¥—è§†é¢‘ï¼‰

### ğŸ“ ç…§ç‰‡åœ°å›¾
- Leaflet + OpenStreetMapï¼Œæ— éœ€ API Key
- ç…§ç‰‡ç¼©ç•¥å›¾æ ‡è®° + å¼¹å‡ºè¯¦æƒ…å¡
- å¯†é›†åŒºåŸŸèšåˆæ ‡è®°
- ç¼©æ”¾æ§åˆ¶ + é‡ç½®

### ğŸ“¸ EXIF å…ƒæ•°æ®

å…¼å®¹ç›¸æœºï¼ˆNikon / Canon / Sony / Fujifilmï¼‰å’Œæ‰‹æœºï¼ˆiPhone / Androidï¼‰ï¼Œæå–å­—æ®µï¼š

| å­—æ®µ | è¯´æ˜ |
|------|------|
| å“ç‰Œ / å‹å· | Camera Make / Model |
| é•œå¤´å‹å· | Lens Model |
| ç„¦è· / å…‰åœˆ / å¿«é—¨ / ISO | Focal / Aperture / Shutter / ISO |
| GPS åæ ‡ | çº¬åº¦ / ç»åº¦ï¼ˆè‡ªåŠ¨è¿‡æ»¤ 0,0ï¼‰ |
| æ‹æ‘„æ—¶é—´ | DateTimeOriginal |
| è½¯ä»¶ / å›ºä»¶ | Software |
| ç™½å¹³è¡¡ / é—ªå…‰ç¯ | White Balance / Flash |
| æ›å…‰æ¨¡å¼ / æµ‹å…‰æ¨¡å¼ | Exposure / Metering |
| æ›å…‰è¡¥å¿ / è‰²å½©ç©ºé—´ | Exposure Bias / Color Space |
| åœºæ™¯ç±»å‹ / æ–¹å‘ | Scene Type / Orientation |

ç¼©ç•¥å›¾ç”Ÿæˆæ—¶è‡ªåŠ¨æ ¹æ® EXIF æ–¹å‘æ—‹è½¬ã€‚

### ğŸ¬ Live Photo
- ä¸Šä¼ æ—¶é™„åŠ é…å¥— `.mov` è§†é¢‘
- å‰ç«¯ LIVE å¾½ç« æ ‡è¯†
- API æ”¯æŒ `live_photo` å­—æ®µ

### ğŸ”§ çµæ´»é…ç½®
- **å¤šæ•°æ®åº“** â€” SQLiteï¼ˆé»˜è®¤ï¼‰ã€MySQLã€PostgreSQL
- **å¤šå­˜å‚¨** â€” æœ¬åœ°ï¼ˆé»˜è®¤ï¼‰ã€AWS S3ã€MinIOã€é˜¿é‡Œäº‘ OSS
- **äº‘ç«¯ç¼©ç•¥å›¾** â€” æ‰€æœ‰å­˜å‚¨åç«¯æ”¯æŒç¼©ç•¥å›¾è‡ªåŠ¨ä¸Šä¼ 

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Go 1.24+**ï¼ˆéœ€ CGOï¼ŒSQLite é©±åŠ¨ä¾èµ–ï¼‰
- **GCC**ï¼ˆC ç¼–è¯‘å™¨ï¼‰

### æœ¬åœ°è¿è¡Œ

```bash
git clone https://github.com/danzai233/mygallery.git
cd mygallery
go mod download
cp config.example.yaml config.yaml
make init
go run main.go
```

è®¿é—®ï¼š
| é¡µé¢ | åœ°å€ |
|------|------|
| ğŸ“· å‰å°ç”»å»Š | http://localhost:8080 |
| âš™ï¸ åå°ç®¡ç† | http://localhost:8080/admin |
| ğŸ—ºï¸ ç…§ç‰‡åœ°å›¾ | http://localhost:8080/map.html |
| ğŸ‘¤ é»˜è®¤è´¦å· | `admin` / `admin123` |

### Docker éƒ¨ç½²

```bash
cp config.example.yaml config.yaml
docker compose build && docker compose up -d
```

### Makefile

```bash
make help    # æ‰€æœ‰å‘½ä»¤
make run     # è¿è¡Œ
make build   # ç¼–è¯‘
make test    # æµ‹è¯•
make dev     # çƒ­é‡è½½
```

---

## ğŸ”§ é…ç½®

é…ç½®æ–‡ä»¶ `config.yaml`ï¼Œä» `config.example.yaml` å¤åˆ¶ä¿®æ”¹ã€‚

### æ•°æ®åº“

```yaml
database:
  type: "sqlite"  # sqlite / mysql / postgres
  sqlite:
    path: "./data/mygallery.db"
```

### å­˜å‚¨

```yaml
storage:
  type: "local"  # local / s3 / minio / aliyun
  local:
    upload_dir: "./uploads"
    thumbnail_dir: "./uploads/thumbnails"
    url_prefix: "/uploads"
```

<details>
<summary>S3 / MinIO / é˜¿é‡Œäº‘ OSS é…ç½®</summary>

```yaml
# AWS S3
storage:
  type: "s3"
  s3:
    region: "us-east-1"
    bucket: "mygallery"
    access_key: "YOUR_KEY"
    secret_key: "YOUR_SECRET"
    url_prefix: "https://bucket.s3.amazonaws.com"

# MinIO
storage:
  type: "minio"
  minio:
    endpoint: "localhost:9000"
    bucket: "mygallery"
    access_key: "minioadmin"
    secret_key: "minioadmin"
    use_ssl: false
    url_prefix: "http://localhost:9000/mygallery"

# é˜¿é‡Œäº‘ OSS
storage:
  type: "aliyun"
  aliyun:
    endpoint: "oss-cn-hangzhou.aliyuncs.com"
    bucket: "mygallery"
    access_key: "YOUR_KEY"
    secret_key: "YOUR_SECRET"
    url_prefix: "https://mygallery.oss-cn-hangzhou.aliyuncs.com"
```

</details>

---

## ğŸŒ API

### å…¬å¼€æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/photos` | ç…§ç‰‡åˆ—è¡¨ï¼ˆ`page`, `size`, `category`, `search`ï¼‰ |
| GET | `/api/photos/:id` | ç…§ç‰‡è¯¦æƒ… |
| GET | `/api/categories` | åˆ†ç±»åˆ—è¡¨ |
| GET | `/api/settings` | ç½‘ç«™è®¾ç½® |
| GET | `/api/photos/:id/reactions` | è¡¨æ€ç»Ÿè®¡ |
| POST | `/api/photos/:id/reactions` | æ·»åŠ /æ›´æ–°è¡¨æ€ |
| DELETE | `/api/photos/:id/reactions` | åˆ é™¤è¡¨æ€ |
| GET | `/health` | å¥åº·æ£€æŸ¥ |

### éœ€è®¤è¯æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/auth/login` | ç™»å½• |
| POST | `/api/photos` | ä¸Šä¼ ç…§ç‰‡ï¼ˆæ”¯æŒ `live_photo` å­—æ®µï¼‰ |
| PUT | `/api/photos/:id` | æ›´æ–°ç…§ç‰‡ |
| DELETE | `/api/photos/:id` | åˆ é™¤ç…§ç‰‡ |
| POST | `/api/categories` | åˆ›å»ºåˆ†ç±» |
| PUT / DELETE | `/api/categories/:id` | æ›´æ–° / åˆ é™¤åˆ†ç±» |

---

## ğŸš€ éƒ¨ç½²

<details>
<summary>äºŒè¿›åˆ¶è¿è¡Œ</summary>

```bash
go build -o mygallery main.go
cp config.example.yaml config.yaml
mkdir -p data uploads uploads/thumbnails
./mygallery
```
</details>

<details>
<summary>Nginx åå‘ä»£ç†</summary>

```nginx
server {
    listen 80;
    server_name gallery.example.com;
    client_max_body_size 50M;
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```
</details>

<details>
<summary>Systemd æœåŠ¡</summary>

```ini
[Unit]
Description=MYGallery
After=network.target
[Service]
Type=simple
WorkingDirectory=/opt/mygallery
ExecStart=/opt/mygallery/mygallery
Restart=on-failure
[Install]
WantedBy=multi-user.target
```
</details>

---

## ğŸ”’ å®‰å…¨å»ºè®®

1. ä¿®æ”¹é»˜è®¤å¯†ç å’Œ JWT å¯†é’¥
2. ç”Ÿäº§ç¯å¢ƒå¯ç”¨ HTTPS
3. é…ç½®é˜²ç«å¢™
4. å®šæœŸå¤‡ä»½ `data/` å’Œ `uploads/`

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| åç«¯ | Go + Gin + GORM |
| è®¤è¯ | JWT |
| EXIF | rwcarlsen/goexif |
| å›¾ç‰‡ | disintegration/imaging |
| æ•°æ®åº“ | SQLite / MySQL / PostgreSQL |
| å­˜å‚¨ | Local / S3 / MinIO / Aliyun OSS |
| å‰ç«¯ | Vanilla JS + Tailwind CSS |
| åœ°å›¾ | Leaflet + OpenStreetMap |

## ğŸ“„ License

MIT

---

<div align="center">
  <p>Made with â¤ï¸ by MYGallery</p>
</div>
